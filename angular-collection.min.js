!function(a,b){"use strict";b.module("ngCollection",[]).factory("$collection",["$filter","$parse",function(a){var d=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},e=function(a,b){return b(a)},f=function(a){return this._chain?new g(a).chain():a},g=function(a,b){b||(b={}),void 0!==b.comparator&&(this.comparator=b.comparator),this.idAttribute=b.idAttribute||this.idAttribute,this._reset(),this.initialize.apply(this,arguments),a&&this.add(a)};return b.extend(g.prototype,{idAttribute:"id",initialize:function(){},add:function(a,c){c||(c={}),b.isArray(a)||(a=a?[a]:[]);var e,f,g,h,i,i=this.comparator&&c.sort!==!1;for(e=0,f=a.length;f>e;e++)if(g=a[e],g[this.idAttribute]||(g[this.idAttribute]=d()),h=this.get(g))b.extend(h,g);else{var j=g[this.idAttribute];this.hash[j]=g,this.array.push(g),this.length+=1}return i&&this.sort(),this},sort:function(){return b.isString(this.comparator)&&(this.array=a("orderBy")(this.array,this.comparator)),this},get:function(a){return null==a?void 0:this.hash[a[this.idAttribute]||a]},find:function(a,b,c){var b=this.where(a,b,c,!0);return f.call(this,b)},where:function(a,c,d,g){var i,h=[];if(b.isFunction(a))i=a;else{var j={};"string"==typeof a?j[a]=c:j=a,i=function(a){for(var b in j)if(j[b]!==a[b])return!1;return!0}}if(!i)return!1;for(var k=0;k<this.array.length;k++)if(e(this.array[k],i)){if(g)return this.array[k];h.push(this.array[k])}var c=g?void 0:h;return f.call(this,c)},update:function(a){var c;return c=this.get(a),c&&b.extend(c,a),c||this.add(a),this},remove:function(a){b.isArray(a)||(a=a?[a]:[]);var c,d,e,f;for(c=0,d=a.length;d>c;c++)if(f=a[c]){if(e=this.array.indexOf(a[c]),-1===e)return this;delete this.hash[f[this.idAttribute]],this.array.splice(e,1),this.length--}return this},removeAll:function(){return this.remove(this.array),this},removeWhere:function(a,b,c){var d=this.where(a,b,c);return this.remove(d),this},last:function(){return this.array[this.length-1]},at:function(a){return this.array[a]},size:function(){return this.array.length},all:function(){return this.array},toJSON:function(){var a=this.map(function(a){return b.copy(a)});return f.call(this,a)},each:function(a,b){var c=Array.prototype.forEach;if(c&&this.array.forEach===c)this.array.forEach(a,b);else if(this.array.length===+this.array.length)for(var d=0,e=this.array.length;e>d;d++)a.call(b,this.array[d],d,this.array)},map:function(a,c){var d=[],e=Array.prototype.map;if(e&&this.array.map===e)return this.array.map(a,c);b.forEach(this.array,function(b,e,f){d.push(a.call(c,b,e,f))});var g=d;return f.call(this,g)},filter:function(b,c){var d=a("filter")(this.array,b,c);return f.call(this,d)},pluck:function(a){var b=this.map(function(b){return b[a]});return f.call(this,b)},chain:function(){return this._chain=!0,this},clone:function(){return new this.constructor(this.array)},slice:function(a,b){return this.array.slice(a,b)},_reset:function(){this.length=0,this.hash={},this.array=[]}}),g.extend=function(a,c){var e,d=this;e=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return d.apply(this,arguments)},b.extend(e,d,c);var f=function(){this.constructor=e};return f.prototype=d.prototype,e.prototype=new f,a&&b.extend(e.prototype,a),e.getInstance=g.getInstance,e.__super__=d.prototype,e},g.getInstance=function(a,b){return new this(a,b)},g}])}(window,window.angular);
